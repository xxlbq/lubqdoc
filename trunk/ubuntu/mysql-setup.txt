
gunzip < mysql-5.1.42-linux-i686-glibc23.tar.gz | tar xvf -



shell> groupadd mysql
shell> useradd -g mysql mysql
shell> cd /usr/local
shell> gunzip < /path/to/mysql-VERSION-OS.tar.gz | tar xvf -
shell> ln -s full-path-to-mysql-VERSION-OS mysql
shell> cd mysql
shell> chown -R mysql .
shell> chgrp -R mysql .
shell> scripts/mysql_install_db --user=mysql
shell> chown -R root .
shell> chown -R mysql data
shell> bin/mysqld_safe --user=mysql &





-- 完全清除卸载 还残留的 软件
dpkg -l |grep ^rc|awk '{print $2}' |sudo xargs dpkg -P




 aptitude purge phpmyadmin

aptitude purge mysql-client 


aptitude purge mysql-server


apt-get remove mysql-common


dpkg -l |grep mysql




./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h lbq-desktop password 'new-password'




/usr/local/mysql/bin/mysqladmin -u root password lm81

/usr/local/mysql/bin/mysqld_safe &
/usr/local/mysql/bin/mysqladmin -u root -plm81 shutdown
/usr/local/mysql/bin/mysql -uroot -plm81


=============================================================
root@lbq-desktop:/usr/local/mysql# scripts/mysql_install_db --user=mysql
Installing MySQL system tables...
OK
Filling help tables...
OK

To start mysqld at boot time you have to copy
support-files/mysql.server to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:

./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h lbq-desktop password 'new-password'

Alternatively you can run:
./bin/mysql_secure_installation

which will also give you the option of removing the test
databases and anonymous user created by default.  This is
strongly recommended for production servers.

See the manual for more instructions.

You can start the MySQL daemon with:
cd . ; ./bin/mysqld_safe &

You can test the MySQL daemon with mysql-test-run.pl
cd ./mysql-test ; perl mysql-test-run.pl

Please report any problems with the ./bin/mysqlbug script!

The latest information about MySQL is available at http://www.mysql.com/
Support MySQL by buying support/licenses from http://shop.mysql.com/




========
grant all on *.* to 'root'@'%' identified by 'lm81' WITH GRANT OPTION;

赋权限 给某个用户   ，用某个密码




格式：grant select on 数据库.* to 用户名@登录主机 identified by "密码" 


是修改生效
mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)






如果你想连接你的mysql的时候发生这个错误：

ERROR 1130: Host '192.168.1.3' is not allowed to connect to this MySQL server

解决方法：
1。 改表法。可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台
电脑，登入mysql后，更改 "mysql" 数据库里的 "user" 表里的 
"host" 项，从"localhost"改称"%"

mysql -u root -pvmwaremysql>use mysql;mysql>update user set host = '%' where user = 
'root';mysql>select host, user from user;

2. 授权法。例如，你想myuser使用mypassword从任何主机连接到mysql服务器的话。

GRANT ALL PRIVILEGES ON *.* TO 'myuser'@'%' IDENTIFIED BY 'mypassword' WITH GRANT OPTION;
如果你想允许用户myuser从ip为192.168.1.3的主机连接到mysql服务器，并使用mypassword作为密码
GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.1.3' IDENTIFIED BY 'mypassword' WITH GRANT 
OPTION;

GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'lm81' WITH GRANT 
OPTION;

GRANT ALL PRIVILEGES  ON MAIN.* TO 'MAIN'@'%' IDENTIFIED BY 'PrG7lv2Y' WITH GRANT ;
GRANT ALL PRIVILEGES  ON INFO.* TO 'MAIN'@'%' IDENTIFIED BY 'PrWsk2iw'  ;

GRANT SELECT,INSERT,UPDATE,DELETE ON MAINDB.* TO MAIN@'192.168.1.%' identified by 'bestwiz';
GRANT ALL PRIVILEGES  ON INFO.* TO INFO@'192.168.1.%' identified by 'bestwiz';

GRANT ALL PRIVILEGES  ON INFO.* TO '%'@'localhost' IDENTIFIED BY 'sys2oo9emcom' WITH GRANT ;
FLUSH PRIVILEGES;

mysql --user=root -p

FLUSH PRIVILEGES;


【建立用户】CREATE USER
CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY 'biscuit';

【设置账户密码】SET PASSWORD 
SET PASSWORD FOR 'jeffrey'@'localhost' = PASSWORD('biscuit');



mysqladmin -u user_name -h host_name password "newpwd"



【user table】
 Although it is generally preferable to assign passwords using one of the preceding methods, you can also do so by 
modifying the user table 
directly:

    *

      To establish a password when creating a new account, provide a value for the Password column:

      shell> mysql -u root mysql
      mysql> INSERT INTO user (Host,User,Password)
          -> VALUES('localhost','jeffrey',PASSWORD('biscuit'));
      mysql> FLUSH PRIVILEGES;

    *

      To change the password for an existing account, use UPDATE to set the Password column value:

      shell> mysql -u root mysql
      mysql> UPDATE user SET Password = PASSWORD('bagel')
          -> WHERE Host = 'localhost' AND User = 'francis';
      mysql> FLUSH PRIVILEGES;




 mysql 配置文件地址     /etc/mysql/my.cnf





[mysql 创建数据库]

mysql> create database javatest;



3. 修改my.cnf
vi /etc/my.cnf
在[client]下添加
default-character-set=utf8
在[mysqld]下添加
default-character-set=utf8



4.重新启动MySQL
[root@bogon ~]# /etc/rc.d/init.d/mysql restart





5.查看字符集设置
mysql> show variables like 'collation_%';
+----------------------+-----------------+
| Variable_name       | Value          |
+----------------------+-----------------+
| collation_connection | utf8_general_ci |
| collation_database | utf8_general_ci |
| collation_server    | utf8_general_ci |
+----------------------+-----------------+
3 rows in set (0.02 sec)
mysql> show variables like 'character_set_%';
+--------------------------+----------------------------+
| Variable_name          | Value                       |
+--------------------------+----------------------------+
| character_set_client    | utf8                      |
| character_set_connection | utf8                      |
| character_set_database | utf8                      |
| character_set_filesystem | binary                   |
| character_set_results     | utf8                      |
| character_set_server    | utf8                      |
| character_set_system    | utf8                      |
| character_sets_dir        | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.02 sec)
mysql>


其他的一些设置方法：

修改数据库的字符集
mysql>use mydb
mysql>alter database MAIN character set cp932;
创建数据库指定数据库的字符集
mysql> create database MAIN character set cp932; 

通过配置文件修改:
修改/var/lib/mysql/mydb/db.opt
default-character-set=latin1
default-collation=latin1_swedish_ci
为
default-character-set=utf8
default-collation=utf8_general_ci
重起MySQL:
[root@bogon ~]# /etc/rc.d/init.d/mysql restart

通过MySQL命令行修改:
mysql> set character_set_client=utf8;
Query OK, 0 rows affected (0.00 sec)
mysql> set character_set_connection=utf8;
Query OK, 0 rows affected (0.00 sec)
mysql> set character_set_database=utf8;
Query OK, 0 rows affected (0.00 sec)
mysql> set character_set_results=utf8;
Query OK, 0 rows affected (0.00 sec)
mysql> set character_set_server=utf8;
Query OK, 0 rows affected (0.00 sec)
mysql> set character_set_system=utf8;
Query OK, 0 rows affected (0.01 sec)
mysql> set collation_connection=utf8;
Query OK, 0 rows affected (0.01 sec)
mysql> set collation_database=utf8;
Query OK, 0 rows affected (0.01 sec)
mysql> set collation_server=utf8;
Query OK, 0 rows affected (0.01 sec)
查看:
mysql> show variables like 'character_set_%';
+--------------------------+----------------------------+
| Variable_name          | Value                       |
+--------------------------+----------------------------+
| character_set_client    | utf8                      |
| character_set_connection | utf8                      |
| character_set_database | utf8                      |
| character_set_filesystem | binary                   |
| character_set_results     | utf8                      |
| character_set_server    | utf8                      |
| character_set_system    | utf8                      |
| character_sets_dir        | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.03 sec)
mysql> show variables like 'collation_%';
+----------------------+-----------------+
| Variable_name       | Value          |
+----------------------+-----------------+
| collation_connection | utf8_general_ci |
| collation_database | utf8_general_ci |
| collation_server    | utf8_general_ci |
+----------------------+-----------------+
3 rows in set (0.04 sec)



CREATE DATABASE db_name
    [[DEFAULT] CHARACTER SET charset_name]
    [[DEFAULT] COLLATE collation_name]

ALTER DATABASE db_name
    [[DEFAULT] CHARACTER SET charset_name]
    [[DEFAULT] COLLATE collation_name]







==================================================================
[mysql 自动启动]

7.设置MySQL的环境变量：
cd //回到你的用户目录。 
cp .bashrc .bashrc_bak //备份.bashrc 聚R Q ?
gedit ~/.bashrc 
在最后加入：export PATH=/opt/mysql/bin:$PATH
然后在终端输入：source ~/.bashrc //使刚修改的起作用
env //查看环境变量
mysql
上面的修改只针对某一用户，你还可以用另外一种办法：在/etc/profile添加PATH路径后，注销一次再echo应该就可以了

8.设置MYSQL自动启动：
sudo cp /opt/mysql/share/mysql/mysql.server /etc/rc2.d/S20mysql

