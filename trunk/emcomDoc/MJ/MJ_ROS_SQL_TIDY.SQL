-- ROS MATCH ORDER SQL

SELECT *  FROM MAIN.JHF_ALIVE_ORDER AS JHF 
WHERE JHF.ORDER_STATUS = 7  
AND JHF.ACTIVE_FLAG = 1  
AND 
JHF.UPDATE_DATE < ( now()  - INTERVAL 3 MINUTE );


-- HEDGE SUCCESS ORDER IN JHF_HEDGE_BIND

SELECT * FROM MAIN.JHF_HEDGE_BIND AS JHF 
WHERE  JHF.CUSTTRADE_ID ='20080528ORD00034524'  
AND JHF.CUSTTRADE_TYPE = 1   
and JHF.HEDGE_STATUS= 2  
AND JHF.ACTIVE_FLAG = 1 ;



-- NET SUCCESS ORDER IN JHF_NET_BIND

SELECT * FROM JHF_NET_BIND AS JHF 
WHERE JHF.CUSTTRADE_ID = '20070907ORD00008856' 
AND  JHF.CUSTTRADE_TYPE = 1 
AND JHF.ACTIVE_FLAG = 1 ;


-- FAIL FILL ORDER UPDATE -- 

UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = 6 AND UPDATE_DATE = NOW() AND REVISION_NUMBER = (REVISION_NUMBER + 1) AND CHANGE_REASON = 9 WHERE ORDER_ID = '20080528ORD00061802';
;

-- query 

SELECT * FROM JHF_ALIVE_ORDER AS JHF WHERE JHF.PARENT_ORDER_ID = '20080530ORD00072901' AND ORDER_STATUS = 7 AND ACTIVE_FLAG = 1;
						

SELECT PARENT_ORDER_ID FROM JHF_ALIVE_ORDER WHERE PARENT_ORDER_ID IS NOT NULL;
 

SELECT * FROM JHF_ALIVE_ORDER AS JHF WHERE JHF.PARENT_ORDER_ID = '20080530ORD00072350' AND ORDER_STATUS = 7 AND ACTIVE_FLAG = 1;


;


WHERE JCE.Sstatus = :varStatus ")
			.append(" AND 	jce.activeFlag = :varActiveFlag ")
			.append(" AND   jce.updateDate < :varDate" )
			.append(" AND   jce.cpExecutionId " +
					" NOT IN ( SELECT jeb.id.cpExecutionId FROM cn.bestwiz.jhf.core.dao.bean.main.JhfExecutionBind jeb )");

-- ROS B 
;
SELECT * FROM JHF_CP_EXECUTION AS JCE 
WHERE JCE.STATUS = 1 AND JCE.ACTIVE_FLAG = 1 AND JCE.UPDATE_DATE < ( now()  - INTERVAL 3 MINUTE ) 
AND JCE.CP_EXECUTION_ID NOT IN (SELECT JCE.CP_EXECUTION_ID FROM JHF_EXECUTION_BIND );


-- 

SELECT * FROM JHF_CP_TRADE_REQUEST AS JHF WHERE JHF.CP_COVER_ID = '2007040200000130' AND JHF.ACTIVE_FLAG = 1 ORDER BY JHF.SEQ_NO DESC;
;





SELECT * FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00000239' ORDER BY INPUT_DATE DESC;
UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = 3  WHERE ORDER_ID = '20080826ORD00000319';
UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = 7  WHERE ORDER_ID = '20080827ORD00000901';
UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = 9  WHERE ORDER_ID = '20080826ORD00000321';
DELETE FROM JHF_ALIVE_ORDER   WHERE ORDER_ID ='20080530ORD00021696';






			