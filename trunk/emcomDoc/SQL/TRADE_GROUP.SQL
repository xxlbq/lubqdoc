


SELECT * FROM JHF_TRADE_GROUP ;
SELECT * FROM JHF_TRADE_GROUP_DETAIL ;

SELECT CUSTOMER_ID,GROUP_ID FROM JHF_CUSTOMER_STATUS WHERE CUSTOMER_ID = '00000120' ;




SELECT ORDER_ID,ORDER_AMOUNT,TRADE_TYPE FROM JHF_ALIVE_ORDER 
WHERE CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO = 'T000000539' ;
SELECT * FROM JHF_ALIVE

SELECT ORDER_ID,CONTRACT_ID ,SETTLED_TYPE FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID IN ('20110411ORD00391102');




-- UPDATE  SETTLE_TYPE 
SELECT ORDER_ID,ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20110420ORD00391907'
SELECT ORDER_ID FROM JHF_ALIVE_ORDER where TOP_ORDER_ID IN  ( SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO = 'T000000509');
SELECT * FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID IN (
    SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO IN( 'T000000535','T000000537')) ;
;
--   #2  TODAY   ,   #1  BEFORE TODAY
--UPDATE JHF_ALIVE_CONTRACT SET SETTLED_TYPE = 1 WHERE CUSTOMER_ID = '00078662' AND AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR = 'USD/JPY' AND SETTLED_TYPE = 2;

UPDATE JHF_ALIVE_CONTRACT SET SETTLED_TYPE = 1 WHERE CONTRACT_ID IN ('20110421CONT00091017','20110421CONT00091018') ;

SELECT AMOUNT_NO_SETTLED,AMOUNT_SETTLING FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID IN (
    SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO IN( 'T000000535','T000000537')) ;
;


-- QUERY  CUSTOMER 
SELECT CONCAT (CUSTOMER_ID,'='),TRADE_GROUP_ID FROM JHF_CUSTOMER_STATUS WHERE TRADE_GROUP_ID IS NULL 
AND CUSTOMER_ID >= '70059000' 
AND CUSTOMER_ID < '70059100' ;


-- QUERY  WORKING   CUSTOMER

SELECT CUSTOMER_ID ,TRADE_GROUP_ID FROM JHF_CUSTOMER_STATUS WHERE  CUSTOMER_ID >= '70059000' 
AND CUSTOMER_ID < '70059100' ORDER BY CUSTOMER_ID ;


SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_STATUS IN (0,1) AND CUSTOMER_ID >= '70059000' AND CUSTOMER_ID < '70059500' ;


-- QUERY TRADE GROUP 
SELECT * FROM JHF_TRADE_GROUP WHERE TRADE_GROUP_ID = '000049';

SELECT  CUSTOMER_ID,TRADE_GROUP_ID FROM JHF_CUSTOMER_STATUS WHERE CUSTOMER_ID = '00000120' ;
SELECT  CUSTOMER_ID,TRADE_GROUP_ID FROM JHF_CUSTOMER_STATUS WHERE CUSTOMER_ID = '00078662' ;
SELECT  CUSTOMER_ID,TRADE_GROUP_ID FROM JHF_CUSTOMER_STATUS WHERE TRADE_GROUP_ID = '000049'

SELECT * FROM JHF_TRADE_GROUP_DETAIL WHERE TRADE_GROUP_ID = '000049'

SELECT COUNT( DISTINCT TRADE_GROUP_ID) FROM JHF_TRADE_GROUP_DETAIL ;




--- delete contrat 
;
--DELETE FROM JHF_ALIVE_CONTRACT WHERE CUSTOMER_ID = '00000120' AND AMOUNT_NO_SETTLED > 0 AND AMOUNT_SETTLING > 0









/* --

INSERT INTO JHF_TRADE_GROUP VALUES('DEFAULT',1,'DEFAULT','DEFAULT',1,NOW(),NOW());
SHOW CREATE TABLE JHF_TRADE_GROUP_DETAIL;



INSERT INTO JHF_TRADE_GROUP_DETAIL(TRADE_GROUP_ID, CURRENCY_PAIR, CUSTTRADE_BAND, INSTANT_1_OPEN_STAY_PLACE, INSTANT_1_CLOSE1_STAY_PLACE, INSTANT_1_CLOSE2_STAY_PLACE, INSTANT_2_OPEN_STAY_PLACE, INSTANT_2_CLOSE1_STAY_PLACE, INSTANT_2_CLOSE2_STAY_PLACE, LIMIT_OPEN_STAY_PLACE, LIMIT_CLOSE1_STAY_PLACE, LIMIT_CLOSE2_STAY_PLACE, STOP_OPEN_STAY_PLACE, STOP_CLOSE1_STAY_PLACE, STOP_CLOSE2_STAY_PLACE, LOSSCUT_CLOSE1_STAY_PLACE, LOSSCUT_CLOSE2_STAY_PLACE, FORCECUT_CLOSE1_STAY_PLACE, FORCECUT_CLOSE2_STAY_PLACE, RISKCONTROL_CLOSE1_STAY_PLACE, RISKCONTROL_CLOSE2_STAY_PLACE, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE)
  VALUES('DEFAULT', 'USD/JPY', 1, 0, 3, 1, 0, 3, 1, 0, 0, 0, 0, 2, 0, 4, 0, 0, 0, 1, 4, 'CS0001', 'CS0001', 1, '2011-04-08 18:32:31.0', '2011-04-08 18:32:31.0');
INSERT INTO JHF_TRADE_GROUP_DETAIL(TRADE_GROUP_ID, CURRENCY_PAIR, CUSTTRADE_BAND, INSTANT_1_OPEN_STAY_PLACE, INSTANT_1_CLOSE1_STAY_PLACE, INSTANT_1_CLOSE2_STAY_PLACE, INSTANT_2_OPEN_STAY_PLACE, INSTANT_2_CLOSE1_STAY_PLACE, INSTANT_2_CLOSE2_STAY_PLACE, LIMIT_OPEN_STAY_PLACE, LIMIT_CLOSE1_STAY_PLACE, LIMIT_CLOSE2_STAY_PLACE, STOP_OPEN_STAY_PLACE, STOP_CLOSE1_STAY_PLACE, STOP_CLOSE2_STAY_PLACE, LOSSCUT_CLOSE1_STAY_PLACE, LOSSCUT_CLOSE2_STAY_PLACE, FORCECUT_CLOSE1_STAY_PLACE, FORCECUT_CLOSE2_STAY_PLACE, RISKCONTROL_CLOSE1_STAY_PLACE, RISKCONTROL_CLOSE2_STAY_PLACE, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE)
  VALUES('DEFAULT', 'USD/JPY', 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'CS0001', 'CS0001', 1, '2011-04-08 18:32:31.0', '2011-04-08 18:32:31.0');
INSERT INTO JHF_TRADE_GROUP_DETAIL(TRADE_GROUP_ID, CURRENCY_PAIR, CUSTTRADE_BAND, INSTANT_1_OPEN_STAY_PLACE, INSTANT_1_CLOSE1_STAY_PLACE, INSTANT_1_CLOSE2_STAY_PLACE, INSTANT_2_OPEN_STAY_PLACE, INSTANT_2_CLOSE1_STAY_PLACE, INSTANT_2_CLOSE2_STAY_PLACE, LIMIT_OPEN_STAY_PLACE, LIMIT_CLOSE1_STAY_PLACE, LIMIT_CLOSE2_STAY_PLACE, STOP_OPEN_STAY_PLACE, STOP_CLOSE1_STAY_PLACE, STOP_CLOSE2_STAY_PLACE, LOSSCUT_CLOSE1_STAY_PLACE, LOSSCUT_CLOSE2_STAY_PLACE, FORCECUT_CLOSE1_STAY_PLACE, FORCECUT_CLOSE2_STAY_PLACE, RISKCONTROL_CLOSE1_STAY_PLACE, RISKCONTROL_CLOSE2_STAY_PLACE, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE)
  VALUES('DEFAULT', 'USD/JPY', 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'CS0001', 'CS0001', 1, '2011-04-08 18:32:31.0', '2011-04-08 18:32:31.0');
INSERT INTO JHF_TRADE_GROUP_DETAIL(TRADE_GROUP_ID, CURRENCY_PAIR, CUSTTRADE_BAND, INSTANT_1_OPEN_STAY_PLACE, INSTANT_1_CLOSE1_STAY_PLACE, INSTANT_1_CLOSE2_STAY_PLACE, INSTANT_2_OPEN_STAY_PLACE, INSTANT_2_CLOSE1_STAY_PLACE, INSTANT_2_CLOSE2_STAY_PLACE, LIMIT_OPEN_STAY_PLACE, LIMIT_CLOSE1_STAY_PLACE, LIMIT_CLOSE2_STAY_PLACE, STOP_OPEN_STAY_PLACE, STOP_CLOSE1_STAY_PLACE, STOP_CLOSE2_STAY_PLACE, LOSSCUT_CLOSE1_STAY_PLACE, LOSSCUT_CLOSE2_STAY_PLACE, FORCECUT_CLOSE1_STAY_PLACE, FORCECUT_CLOSE2_STAY_PLACE, RISKCONTROL_CLOSE1_STAY_PLACE, RISKCONTROL_CLOSE2_STAY_PLACE, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE)
  VALUES('DEFAULT', 'USD/JPY', 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'CS0001', 'CS0001', 1, '2011-04-08 18:32:31.0', '2011-04-08 18:32:31.0');
INSERT INTO JHF_TRADE_GROUP_DETAIL(TRADE_GROUP_ID, CURRENCY_PAIR, CUSTTRADE_BAND, INSTANT_1_OPEN_STAY_PLACE, INSTANT_1_CLOSE1_STAY_PLACE, INSTANT_1_CLOSE2_STAY_PLACE, INSTANT_2_OPEN_STAY_PLACE, INSTANT_2_CLOSE1_STAY_PLACE, INSTANT_2_CLOSE2_STAY_PLACE, LIMIT_OPEN_STAY_PLACE, LIMIT_CLOSE1_STAY_PLACE, LIMIT_CLOSE2_STAY_PLACE, STOP_OPEN_STAY_PLACE, STOP_CLOSE1_STAY_PLACE, STOP_CLOSE2_STAY_PLACE, LOSSCUT_CLOSE1_STAY_PLACE, LOSSCUT_CLOSE2_STAY_PLACE, FORCECUT_CLOSE1_STAY_PLACE, FORCECUT_CLOSE2_STAY_PLACE, RISKCONTROL_CLOSE1_STAY_PLACE, RISKCONTROL_CLOSE2_STAY_PLACE, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE)
  VALUES('DEFAULT', 'USD/JPY', 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'CS0001', 'CS0001', 1, '2011-04-08 18:32:31.0', '2011-04-08 18:32:31.0');



*/

