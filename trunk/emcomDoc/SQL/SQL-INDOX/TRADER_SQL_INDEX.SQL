[@@@@@@@@@@   TRADER]

-- JHF_ALIVE_ORDER
SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = ? AND ACTIVE_FLAG = ? 

SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = ? AND ORDER_STATUS = ? AND ACTIVE_FLAG = ? 

SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = ? AND PARENT_ORDER_ID = ? AND ACTIVE_FLAG = ? 

UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = ? WHERE ORDER_ID = ? ;

UPDATE JHF_ALIVE_ORDER  SET REVISION_NUMBER = ? ,ORDER_STATUS = ? ,BOARD_RATE = ? ,TRADE_PRICE = ? ,
EXECUTION_PRICE = ? ,PRICE_ID = ? ,CHANGE_REASON = ? ,UPDATE_DATE = ? ,UPDATE_STAFF_ID = ? ,EXECUTION_MODE = ? ,
TRADERTIME_PRICE_ID = ? ,TRADERTIME_PRICE = ? ,CP_PRICE_ID = ? ,CP_PRICE = ?   WHERE ( ORDER_STATUS = ?  OR ORDER_STATUS = ? ) AND ORDER_ID = ? AND REVISION_NUMBER = ? AND ACTIVE_FLAG ? ;





---  JHF_ALIVE_EXECUTION


INSERT INTO JHF_ALIVE_EXECUTION(EXECUTION_ID, TRADE_TYPE, EXECUTION_TYPE, SIDE, BOARD_RATE, NEGO_ID, CP_PRICE, REVISION_NUMBER, CUSTOMER_ID, CURRENCY_PAIR, PRODUCT_ID, TRADE_ID, TRADE_PRICE, COMMISSION, COMMISSION_TYPE, LOSSCUT_ORDER_FLAG, EXECUTION_CORRECT_STATUS, COMMENTS, COMMISSION_TAX, SETTLE_DATE, EXECUTION_PRICE_ID, EXECUTION_PRICE, EXECUTION_DATE, EXECUTION_DATETIME, EXECUTION_TIME, EXECUTION_AMOUNT, SETTLE_CONTRACT_ID, ORDER_PRICE, ORDER_DATE, ORDER_DATETIME, ORDER_TIME, ORDER_ID, DEALER_CODE, AGENT_STAFF_ID, GROUP_ID, CONVERT_RATE, FORCE_RELATION_FLAG, FORCE_RELATION_ID, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE, EXECUTION_BIND_STATUS, CUSTOMER_ORDER_NO) 
    VALUES('', 0, 0, 0, 0, '', 0, 0, '', '', '', '', 0, 0, 0, 0, 0, '', 0, '', '', 0, '', '2012-9-26 3:23:1.0', '', 0, '', 0, '', '2012-9-26 3:23:1.0', '', '', '', '', '', 0, 0, '', '', '', 0, '2012-9-26 3:23:1.0', '2012-9-26 3:23:1.0', 0, '')
;
INSERT INTO JHF_ALIVE_EXECUTION VALUES (?,?,? ........);








--  JHF_ALIVE_CONTRACT

SELECT * FROM JHF_ALIVE_CONTRACT WHERE CONTRACT_ID  = ? ;

UPDATE JHF_ALIVE_CONTRACT SET AMOUNT_SETTLING = ?  WHERE CONTRACT_ID  = ? ;

UPDATE JHF_ALIVE_CONTRACT SET AMOUNT_SETTLING = ? ,AMOUNT_NO_SETTLED = ? ,AMOUNT_SETTLED = ?  ....  WHERE CONTRACT_ID  = ? ;


INSERT INTO JHF_ALIVE_CONTRACT(CONTRACT_ID, TRADE_TYPE, SETTLED_TYPE, SIDE, CONTRACT_CURRENCY_CODE, COUNTER_CURRENCY_CODE, PRODUCT_ID, TRADE_ID, ORDER_ID, REVISION_NUMBER, CURRENCY_PAIR, CP_PRICE, CUSTOMER_ID, SWAP_INTEREST, SETTLEMENT_COMMISSION, PREVIOUS_SWAP_INTEREST, PRE_PREVIOUS_SWAP_INTEREST, ORIGINAL_SETTLE_DATE, SETTLE_DATE, AMOUNT_NO_SETTLED, CURRENT_UNREALIZED_PL, PREVIOUS_UNREALIZED_PL, EXECUTION_DATETIME, ORDER_PRICE, TRADE_PRICE, EXECUTION_PRICE, AMOUNT, ORDER_DATETIME, AMOUNT_SETTLED, OPEN_COMMISSION, AMOUNT_SETTLING, TODAY_ADDED_SWAP, FORCE_RELATION_FLAG, FORCE_RELATION_ID, STATUS, AGENT_STAFF_ID, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE, CUSTOMER_ORDER_NO, CHANGE_REASON) 
    VALUES('', 0, 0, 0, '', '', '', '', '', 0, '', 0, '', 0, 0, 0, 0, '', '', 0, 0, 0, '2012-9-26 3:29:43.0', 0, 0, 0, 0, '2012-9-26 3:29:43.0', 0, 0, 0, 0, 0, '', 0, '', '', '', 0, '2012-9-26 3:29:43.0', '2012-9-26 3:29:43.0', '', 0)
;




--  JHF_HEDGE_CUSTTRADE

DELETE FROM JHF_HEDGE_CUSTTRADE WHERE TYPE = ? AND ID = ? AND AMOUNT = AMOUNT_NOT_HEDGED AND AMOUNT_HEDGING = 0 AND ACTIVE_FLAG = 1 ;




[@@@@@@@@@@   FORCECUT]


-- CANCEL ORDER
;
UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = ? ,ORDER_ROUTE = ? ,CHANNEL_ID = ? ,REVISION_NUMBER = ? ,CHANGE_REASON = ? 
  WHERE ORDER_ID = ? AND CANCEL_REJECT_FLAG = ? AND ORDER_STATUS = ? AND ACTIVE_FLAG = ? AND CUSTOMER_ID = ? AND REVISION_NUMBER = ? 


;
			StringBuffer hqlUpdate = new StringBuffer();
			    hqlUpdate.append("update JhfAliveOrder set ")
				         .append("order_status =:orderStatus")
				         .append(",order_route=:orderRoute")
				         .append(",channel_id =:channelId")
				         .append(",revision_number=revision_number+1")
				         .append(",CHANGE_REASON =:changeReason  ");
	        if(order.getCustomerIp()!=null){
	        	hqlUpdate.append(",ipAddressUpdate=:ipAddressUpdate  ");
			}
	        hqlUpdate.append("where order_id=:orderId ")
				         .append("and cancel_reject_flag=:cancelRejectFlag ")
				         .append("and order_status in ( 0,1) ")
				         .append("and active_Flag =:activeFlag ")
				         .append("and customer_id=:customerId ")
				         .append("and revision_number=:revisionNumber");




SELECT * FROM JHF_ALIVE_CONTRACT WHERE CONTRACT_ID = ? ;


INSERT INTO JHF_ALIVE_ORDER(ORDER_ID, ACTIVATION_DATE, ORDER_TIME, ORDER_DATETIME, ORDER_ORIGINAL_DATETIME, REVISION_NUMBER, ORDER_PRICE, EXPIRATION_DATE, ORDER_AMOUNT, ORDER_DATE, EXECUTION_PRICE, TOP_ORDER_ID, PRODUCT_ID, TRAILING_STEP, BOARD_RATE, SETTLE_CONTRACT_ID, TRADE_PRICE, CURRENCY_PAIR, CUSTOMER_ID, PARENT_ORDER_ID, ROUTE_CHANNEL_ID, CP_PRICE, NEGO_ID, REFERENCE_PRICE, TRADE_ID, ORDER_BIND_ID, TQ_TRADE_ID, LAYER_ID, PRICE_ID, OCO_ORDER_ID, ACTIVATION_TYPE, CHANNEL_ID, EXPIRATION_TYPE, SIDE, EXECUTION_TYPE, CUST_EXECUTION_TYPE, CUST_EXECUTION_DATE, TRADE_TYPE, LOSSCUT_ORDER_FLAG, MARKET_AT_CLOSING_FLAG, CANCEL_REJECT_FLAG, ORDER_STATUS, ORDER_ROUTE, ORDER_TYPE, SLIPPAGE, FORCE_RELATION_FLAG, FORCE_RELATION_ID, MEMO, CAP_RELATION_ID, AGENT_STAFF_ID, INPUT_STAFF_ID, UPDATE_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE, STOPORDER_RETRY_FLAG, CUSTOMER_ORDER_NO, CHANGE_REASON, ORDER_PRICE_ID, TRIGGER_PRICE_ID, TRIGGER_DATETIME, IP_ADDRESS_INPUT, IP_ADDRESS_UPDATE, EXECUTION_MODE, TRADERTIME_PRICE_ID, TRADERTIME_PRICE, CP_PRICE_ID) 
    VALUES('', '2012-9-26 3:54:35.0', '', '2012-9-26 3:54:35.0', '2012-9-26 3:54:35.0', 0, 0, '2012-9-26 3:54:35.0', 0, '', 0, '', '', 0, 0, '', 0, '', '', '', '', 0, '', 0, '', '', '', 0, '', '', 0, '', 0, 0, 0, 0, '2012-9-26 3:54:35.0', 0, 0, 0, 0, 0, 0, 0, 0, 0, '', '', '', '', '', '', 0, '2012-9-26 3:54:35.0', '2012-9-26 3:54:35.0', 0, '', 0, '', '', '2012-9-26 3:54:35.0', '', '', 0, '', 0, '')
;




[@@@@@@@@@@   ROS]
;
SELECT *  FROM JHF_ALIVE_ORDER WHERE ORDER_STATUS = ? AND ACTIVE_FLAG =?   AND UPDATE_DATE < ? ;




















