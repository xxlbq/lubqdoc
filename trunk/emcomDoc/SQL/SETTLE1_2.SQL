
SELECT * FROM JHF_APP_PROPERTY ;

--EUR/AUD,GBP/AUD,EUR/NZD,GBP/NZD,AUD/NZD,EUR/CAD,GBP/CAD,AUD/CAD,NZD/CAD,EUR/CHF,GBP/CHF,AUD/CHF,NZD/CHF,CAD/CHF,USD/ZAR,EUR/ZAR,GBP/ZAR
UPDATE JHF_APP_PROPERTY SET PROPERTY_VALUE = '' WHERE PROP_TYPE='SYSTEM' AND PROPERTY_KEY='OPEN_CONSTRAINT_CURRENCY_PAIR';


SELECT * FROM JHF_PRODUCT WHERE 
UPDATE JHF_PRODUCT SET OPEN_BUY_CONSTRAINT = 0 ,OPEN_SELL_CONSTRAINT = 0 ,CLOSE_BUY_CONSTRAINT = 0 ,CLOSE_SELL_CONSTRAINT = 0 
WHERE CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);

--  update   settle type 


SELECT CONTRACT_ID,SETTLED_TYPE, ORDER_ID,CUSTOMER_ORDER_NO ,AMOUNT, SETTLED_TYPE FROM JHF_ALIVE_CONTRACT  
WHERE CUSTOMER_ID = '00000014' AND AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR = 'USD/JPY'
ORDER BY INPUT_DATE DESC ;


--    #1  BEFORE TODAY         #2  TODAY   ,=============>>

SELECT * FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID = ( 
     SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO = 'T000000529') ;


UPDATE JHF_ALIVE_CONTRACT SET SETTLED_TYPE = 1 WHERE CUSTOMER_ID = '00078662' AND AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR = 'USD/JPY' AND SETTLED_TYPE = 2;
UPDATE JHF_ALIVE_CONTRACT SET SETTLED_TYPE = 1 WHERE CONTRACT_ID ='20110420CONT00091014' ;

--<<==============




---  JHF_ALIVE_ORDER   SETTTLE TYPE 

SELECT  ORDER_ID,TRADE_TYPE ,ORDER_AMOUNT FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO = 'T000000485' ;


SELECT  ORDER_ID,TRADE_TYPE ,ORDER_AMOUNT FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID='2011032907164202';

SELECT * FROM JHF_ALIVE_CONTRACT WHERE CUSTOMER_ID = '00078662' 
AND SETTLE_ORDER_ID = 
(

 SELECT ORDER_ID,SETTLE_CONTRACT_ID FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO = 'T000000477'

)
;

SELECT * FROM JHF_APP_HA where PROC_NAME = 'GWDB' AND IP_ADDR = '10.4.7.154';
UPDATE JHF_APP_HA SET IP_ADDR = '127.0.0.1' WHERE PROC_NAME='GWDB'


SELECT ORDER_ID,ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE TOP_ORDER_ID IN ('20110322ORD00390332','20110322ORD00390333','20110322ORD00390334','20110322ORD00390329','20110322ORD00390325') AND ORDER_STATUS = 3 ;



SELECT * FROM JHF_APPLICATION_DATE ;
UPDATE JHF_APPLICATION_DATE SET FRONT_DATE = '20110321' WHERE DATE_KEY = 'F' ;
UPDATE JHF_APPLICATION_DATE SET FRONT_DATE = '20110320' WHERE DATE_KEY = 'B' ;
UPDATE JHF_APPLICATION_DATE SET FRONT_DATE = '20110320' WHERE DATE_KEY = 'S' ;









--   TRADER  NOT   DONE
SELECT  * FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND ORDER_STATUS = 7 and CURRENCY_PAIR = 'USD/JPY'
;
SELECT  * FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00078662' AND CUSTOMER_ORDER_NO = 'T000000478' ;

SELECT * FROM JHF_ALIVE_CONTRACT  WHERE ORDER_ID = (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ID = '00000239' AND CUSTOMER_ORDER_NO = 'T000003117') ;
UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = 1 WHERE  CUSTOMER_ID = '00078662' AND ORDER_STATUS = 7 and CURRENCY_PAIR = 'USD/JPY'
;



UPDATE JHF_ALIVE_CONTRACT SET SETTLED_TYPE = 1 WHERE CONTRACT_ID = '20110408CONT00064114'
;
SELECT * FROM JHF_HEDGE_CUSTTRADE WHERE ID = '20110328ORD00389805';
DELETE FROM JHF_HEDGE_CUSTTRADE WHERE ID = '20110321ORD00389914';



SELECT * FROM JHF_CUSTTRADE_CONTRL WHERE CURRENCY_PAIR = 'USD/JPY'



SELECT * FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ORDER_NO IN( 'T000003032','T000003088') AND CUSTOMER_ID = '00000239' ;

SELECT * FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID = '20110314ORD00388173' ;


SELECT CURRENCY_PAIR ,CUSTTRADE_BAND ,INSTANT_CLOSE1_PRICE_SWATICH ,INSTANT_CLOSE1_PRICE_SWATICH_2,INSTANT_CLOSE2_PRICE_SWATICH ,INSTANT_CLOSE2_PRICE_SWATICH_2  
 FROM JHF_CUSTTRADE_CONTRL where CURRENCY_PAIR = 'GBP/USD' ;


---   query order by customer_order_no
SELECT ORDER_ID,ORDER_AMOUNT,TRADE_TYPE FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ORDER_NO IN( 'T000003106','T000003105') AND CUSTOMER_ID = '00000239' ;

---   query order by orderbindid
SELECT ORDER_ID,ORDER_AMOUNT,TRADE_TYPE FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2011040800536701'



;
SELECT REVISION_NUMBER  FROM JHF_ALIVE_ORDER WHERE REVISION_NUMBER > 100

DELETE FROM JHF_ALIVE_ORDER WHERE CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
)  AND ORDER_STATUS ; 


UPDATE JHF_ALIVE_ORDER SET 
ORDER_STATUS=2,CHANNEL_ID='SYSTEM',UPDATE_DATE=NOW(),MEMO='Order cancellation by the system'
WHERE  ORDER_STATUS IN (0,1) AND ACTIVE_FLAG=1
AND CURRENCY_PAIR IN ('EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR');

DELETE FROM JHF_ALIVE_ORDER WHERE ORDER_STATUS = 7 AND CURRENCY_PAIR IN ('EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR');

DELETE FROM JHF_ALIVE_CONTRACT WHERE CURRENCY_PAIR IN ('EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR')
AND AMOUNT_SETTLING > 0
-------------------  RELEASE   



SELECT * FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);

SELECT * FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_SETTLING > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);



SELECT * FROM JHF_ALIVE_CONTRACT WHERE CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);


SELECT DISTINCT  CUSTOMER_ID , CURRENCY_PAIR FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);


SELECT DISTINCT  (CURRENCY_PAIR) , CUSTOMER_ID  FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);

SELECT DISTINCT  (CURRENCY_PAIR)   FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
);


SELECT DISTINCT (CURRENCY_PAIR)  FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
) AND MOD (CUSTOMER_ID ,4) = 0;


SELECT DISTINCT (CURRENCY_PAIR)  FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
) AND MOD (CUSTOMER_ID ,4) = 1;


SELECT DISTINCT (CURRENCY_PAIR)  FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
) AND MOD (CUSTOMER_ID ,4) = 2;

SELECT DISTINCT (CURRENCY_PAIR)  FROM JHF_ALIVE_CONTRACT WHERE AMOUNT_NO_SETTLED > 0 AND CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
) AND MOD (CUSTOMER_ID ,4) = 3;




SELECT * FROM JHF_ORDER_NO_GENERATOR WHERE CUSTOMER_ORDER_NO >
show create table JHF_ORDER_NO_GENERATOR
SELECT CUSTOMER_ORDER_NO FROM JHF_ALIVE_ORDER ORDER BY CUSTOMER_ORDER_NO DESC LIMIT 10 ;
update JHF_ORDER_NO_GENERATOR set CUSTOMER_ORDER_NO = CUSTOMER_ORDER_NO + 400000 ;

select * from JHF_ORDER_NO_GENERATOR where CUSTOMER_ID = '00061889'


select * from JHF_CUSTOMER_STATUS where CUSTOMER_ID = '00100169' ;




;
select CUSTOMER_ORDER_NO from JHF_ALIVE_ORDER where CUSTOMER_ID = '00100169' ORDER BY CUSTOMER_ORDER_NO DESC;


SELECT * FROM JHF_CUSTOMER_STATUS ;



SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20110322ORD05156085' ;
SELECT * FROM JHF_ALIVE_CONTRACT WHERE CONTRACT_ID = '20110114CONT00275474'

;
SELECT ORDER_ID,EXECUTION_TYPE , SETTLE_CONTRACT_ID ,ORDER_STATUS ,ORDER_BIND_ID ,CUSTOMER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20110114ORD00820542' 

SELECT MOD(103322,4)

SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20110114ORD00820542';
SELECT CONTRACT_ID,AMOUNT,AMOUNT_NO_SETTLED,AMOUNT_SETTLED,AMOUNT_SETTLING FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID = '20110114ORD00820542';

SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20110211ORD02541496';
SELECT CONTRACT_ID,AMOUNT,AMOUNT_NO_SETTLED,AMOUNT_SETTLED,AMOUNT_SETTLING FROM JHF_ALIVE_CONTRACT WHERE ORDER_ID = '20110211ORD02541496';


SELECT * FROM JHF_ALIVE_ORDER WHERE TOP_ORDER_ID = '20110103ORD00036951'
SELECT * FROM JHF_ALIVE_ORDER WHERE TOP_ORDER_ID = '20110211ORD02541496'


20081120CONT01387021-20110322CUEX03470055

;
SELECT * FROM JHF_ALIVE_CONTRACT_BIND WHERE CONTRACT_ID = '20081120CONT01387021' AND EXECUTION_ID = '20110322CUEX03470055'
SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20110322ORD05158035' ;



SELECT CUSTOMER_ID,CUSTOMER_ORDER_NO FROM JHF_ALIVE_ORDER WHERE CURRENCY_PAIR IN (
'EUR/AUD','GBP/AUD','EUR/NZD','GBP/NZD','AUD/NZD','EUR/CAD','GBP/CAD','AUD/CAD','NZD/CAD','EUR/CHF','GBP/CHF','AUD/CHF','NZD/CHF','CAD/CHF','USD/ZAR','EUR/ZAR','GBP/ZAR'
) AND MEMO = 'The forced settlement by currency  deletion' ORDER BY CUSTOMER_ID;