SELECT * FROM JHF_APP_PROPERTY WHERE PROP_TYPE ='RATE' and PROPERTY_KEY='ratecacheexpiredtime'

update JHF_APP_PROPERTY  set PROPERTY_VALUE = '9999999999' WHERE PROP_TYPE ='RATE' and PROPERTY_KEY='ratecacheexpiredtime'






UPDATE JHF_APP_PROPERTY SET PROPERTY_VALUE = '1000000' WHERE PROP_TYPE = 'TOMCAT_SESSION';

SELECT * FROM JHF_CUSTOMER_BLACKLIST WHERE CUSTOMER_ID = '00006701';

SELECT * FROM JHF_APP_PROPERTY WHERE PROP_TYPE = 'BLACKLIST' ;

SELECT * FROM JHF_APP_PROPERTY WHERE PROP_TYPE = 'RATE' AND PROPERTY_KEY = 'ratecacheexpiredtime';



SELECT * FROM JHF_APP_PROPERTY WHERE PROP_TYPE = 'BLACKLIST';

UPDATE JHF_APP_PROPERTY SET PROPERTY_VALUE = 0  WHERE PROP_TYPE = 'BLACKLIST' AND PROPERTY_KEY = 'BLACKLIST_MODE';
UPDATE JHF_APP_PROPERTY SET PROPERTY_VALUE = 1  WHERE PROP_TYPE = 'BLACKLIST' AND PROPERTY_KEY = 'BLACKLIST_MODE';


SELECT * FROM JHF_STATUS_CONTRL WHERE CURRENCY_PAIR = 'EUR/JPY';
SELECT CURRENCY_PAIR,AUTOHEDGE_SWATICH, AUTOHEDGE_MARKET_BUY,AUTOHEDGE_MARKET_SELL ,STOP_TIME_BEFORE_EOD,STOP_TIME_BEFORE_EOD_SWITCH  FROM JHF_STATUS_CONTRL WHERE CURRENCY_PAIR = 'EUR/JPY';


SELECT ORDER_ID,ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00000142' ORDER BY INPUT_DATE DESC;






SELECT * FROM JHF_HEDGE_BIND WHERE CUSTTRADE_ID = '20080729CUEX00003920';
SELECT * FROM JHF_HEDGE_BIND WHERE CUSTTRADE_ID in( '20080729CUEX00003849','20080729CUEX00003850','','');


SELECT * FROM JHF_CP_TRADE_REQUEST WHERE CP_COVER_ID = '20080729COVR00000869';
DELETE FROM JHF_CP_TRADE_REQUEST WHERE SEQ_NO < ' 2008070100000817';

SELECT * FROM JHF_CP_TRADE_RESPONSE WHERE CP_COVER_ID = '20080729COVR00000869';

SELECT * FROM JHF_EXECUTION_BIND WHERE EXECUTION_ID IN ( '20080718CUEX00005402','','');

SELECT * FROM JHF_CP_EXECUTION WHERE CP_EXECUTION_ID = '20080718CPEX00098802';

update JHF_CUSTOMER_STATUS set LOGIN_PASSWORD = '593c9b4a9390551d53e5cacf28ebd638' ,LOGIN_ID = 'Ifuleyou'  where LOGIN_ID = 'Ilu00012' 
SELECT * FROM JHF_CUSTOMER_STATUS WHERE LOGIN_ID = 'Ifuleyou'


;
SELECT * FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00000120' ORDER BY INPUT_DATE DESC;
SELECT order_id,ORDER_TYPE FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00006701' ORDER BY INPUT_DATE DESC;

SELECT * FROM JHF_ORDER_STATUS_HISTORY WHERE ORDER_ID IN ('20080710ORD00001611','20080710ORD00001612','20080710ORD00001613') ORDER BY ORDER_ID

;
UPDATE JHF_ALIVE_ORDER SET ORDER_STATUS = 1 WHERE ORDER_ID = '20080711ORD00001632';


select jhfcustome0_.CUSTOMER_ID as CUSTOMER1_30_0_ from MAIN.JHF_CUSTOMER_LOCK jhfcustome0_ where jhfcustome0_.CUSTOMER_ID='00006701' for update

select * from JHF_CUSTOMER_LOCK where CUSTOMER_ID = '00006701';

select jhfcustome0_.CUSTOMER_ID as CUSTOMER1_30_0_ from MAIN.JHF_CUSTOMER_LOCK jhfcustome0_ where jhfcustome0_.CUSTOMER_ID='00006701' for update
select jhfcustome0_.CUSTOMER_ID as CUSTOMER1_30_0_ from MAIN.JHF_CUSTOMER_LOCK jhfcustome0_ where jhfcustome0_.CUSTOMER_ID='00006701' for update

SELECT * FROM JHF_CUSTOMER_LOCK WHERE CUSTOMER_ID = '00006701';

show full processlist

show status like 'innodb_row_lock%'
CREATE TABLE innodb_monitor(a INT) ENGINE=INNODB;

Show innodb status;
;
SELECT * FROM JHF_ORDER_STATUS_HISTORY WHERE CUSTOMER_ID = '00000120' ;
SHOW CREATE TABLE JHF_ORDER_STATUS_HISTORY ;



SELECT * FROM JHF_EXECUTION WHERE ORDER_ID IN ('20080715ORD00000474','20080715ORD00000475','20080715ORD00000476');

DELETE FROM JHF_EXECUTION WHERE EXECUTION_ID = '20080715CUEX00001360';

SELECT * FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00008101' AND CUSTOMER_ORDER_NO = 'T000000518';

SELECT * FROM JHF_SPOT_RATE_CONFIG WHERE CURRENCY_PAIR = 'EUR/JPY';
SHOW CREATE TABLE JHF_SPOT_RATE_CONFIG

SELECT * FROM JHF_

SELECT * FROM JHF_HEDGE_CUSTTRADE WHERE TRIGGERID = '3431703';


DELETE FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID='00000120' AND CURRENCY_PAIR='USD/JPY';
DELETE FROM JHF_ALIVE_CONTRACT WHERE CUSTOMER_ID='00000120' AND CURRENCY_PAIR='USD/JPY';



UPDATE JHF_EXECUTION SET ACTIVE_FLAG = 1 WHERE ORDER_ID = '20080716ORD00000814';

UPDATE JHF_EXECUTION SET ACTIVE_FLAG = 0 WHERE ORDER_ID IN( '20080717ORD00007623','20080717ORD00007625','20080717ORD00007694','20080717ORD00007698');

SELECT ORDER_ID,CUSTOMER_ORDER_NO FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ORDER_NO IN ('T000000058','T000000044','T000000062','T000000046','') AND CUSTOMER_ID = '00000120';

SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20080716ORD00000814';

SELECT * FROM JHF_ALIVE_ORDER WHERE  CUSTOMER_ORDER_NO = 'T000000518'

SELECT * FROM JHF_PRODUCT WHERE CURRENCY_PAIR = 'USD/JPY'



--===================================
--===================================
--======   1 LOT TRIGGER 2   
--===================================
--===================================


SELECT * FROM JHF_SPOT_RATE_CONFIG WHERE CURRENCY_PAIR = 'EUR/JPY';

SELECT CURRENCY_PAIR,BLACKLIST_SLIPPAGE FROM JHF_SPOT_RATE_CONFIG ;

UPDATE JHF_SPOT_RATE_CONFIG SET BLACKLIST_SLIPPAGE = '0.20' WHERE CURRENCY_PAIR IN ('USD/JPY','EUR/JPY') 

-- EXECUTION  (根据orderId 获得execution)
SELECT * FROM JHF_EXECUTION WHERE ORDER_ID = '20081020ORD00019301'\G;
SHOW CREATE TABLE JHF_EXECUTION

INSERT INTO JHF_APP_PROPERTY(PROP_TYPE, PROPERTY_KEY, PROPERTY_VALUE, DISPLAY_NAME, NOTE, UPDATE_STAFF_ID, INPUT_STAFF_ID, ACTIVE_FLAG, INPUT_DATE, UPDATE_DATE) 
VALUES('BLACKLIST', 'BLACKLIST_MODE', '0', '成行注文の非滞留モ`ド', '#0:1Lot Stay&Trigger , #1:Normal BlackList,Not Stay ', 'system', 'system', 1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

SELECT * FROM JHF_EXECUTION WHERE EXECUTION_ID = '20081020CUEX00020977'






SELECT * FROM JHF_ALIVE_ORDER WHERE ORDER_ID IN (SELECT ORDER_ID FROM JHF_ORDER_BIND WHERE ORDER_BIND_ID = '2008071500000708');

SELECT ORDER_ID,ORDER_PRICE,ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20081023ORD00004880';

SELECT ORDER_ID,ORDER_PRICE FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2008102200024101';

SELECT ORDER_ID,ORDER_PRICE,SLIPPAGE FROM JHF_ALIVE_ORDER WHERE ORDER_ID = '20081106ORD00049171';


SELECT ORDER_ID,ORDER_PRICE ,ORDER_STATUS FROM JHF_ORDER_STATUS_HISTORY WHERE ORDER_ID = '20081022ORD00020407';

SELECT * FROM JHF_EXECUTION WHERE ORDER_ID ='20081027ORD00025982';

SELECT order_id FROM JHF_EXECUTION WHERE EXECUTION_ID = '20081023CUEX00004446';


SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID='2008102700028911'
SELECT * FROM JHF_HEDGE_CUSTTRADE  WHERE ID = '20081027CUEX00025002';
SELECT * FROM JHF_HEDGE_CUSTTRADE_HISTORY WHERE ID = '20081022CUEX00022396';
SELECT * FROM JHF_HEDGE_CUSTTRADE  WHERE TRIGGERID = '3434026';

SELECT * FROM JHF_HEDGE_CUSTTRADE_HISTORY WHERE TRIGGERID = '3432410';
SELECT * FROM JHF_HEDGE_BIND where CUSTTRADE_ID = '20081027CUEX00025001';

SELECT * FROM JHF_HEDGE_BIND WHERE CUSTTRADE_ID IN(SELECT EXECUTION_ID FROM JHF_EXECUTION 
WHERE ORDER_ID IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2008102700028702'));

SELECT * FROM JHF_HEDGE_BIND WHERE CUSTTRADE_ID in ('20081027ORD00026001','20081027ORD00026002');
SELECT * FROM JHF_EXECUTION_BIND WHERE EXECUTION_ID IN ('20081027CUEX00025007','')
SELECT * FROM JHF_HEDGE_CUSTTRADE ORDER BY INPUT_DATE DESC;
SELECT * FROM JHF_HEDGE_BIND WHERE CP_COVER_ID= '20081027COVR00015124'
SELECT * FROM JHF_HEDGE_CUSTTRADE WHERE ID = '20081027ORD00025982'
SELECT * FROM JHF_CP_EXECUTION WHERE CP_COVER_ID = '20081027COVR00015124'

--@@@@@@@@@@@@@@@@
SELECT ORDER_ID,ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00023701' AND CUSTOMER_ORDER_NO = 'T000000410';

--===================================
--===================================
--======   1 LOT TRIGGER 3   
--===================================
--===================================
SELECT * FROM JHF_CUSTOMER_BLACKLIST 
SELECT * FROM JHF_CUSTOMER_BLACKLIST_CONFIG WHERE CURRENCY_PAIR = 'EUR/JPY';

UPDATE JHF_CUSTOMER_BLACKLIST_CONFIG SET MODE_FOR_INSTANT_ORDER = '3' WHERE CURRENCY_PAIR = 'EUR/JPY';

UPDATE JHF_CUSTOMER_BLACKLIST_CONFIG SET MODE_FOR_OTHER_ORDER = '0' WHERE CURRENCY_PAIR = 'EUR/JPY';

SELECT EXECUTION_ID,ORDER_ID,ORDER_PRICE,EXECUTION_TYPE,EXECUTION_PRICE,UPDATE_DATE FROM JHF_EXECUTION 
WHERE ORDER_ID IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2008112000006601');

SELECT ID,CURRENCY_PAIR,AMOUNT,PRICE,SIDE, AMOUNT_NOT_HEDGED,AMOUNT_HEDGING, TRIGGERID 
FROM JHF_HEDGE_CUSTTRADE  WHERE ID IN (SELECT EXECUTION_ID FROM JHF_EXECUTION 
WHERE ORDER_ID IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2008120800001501'));


SELECT * FROM JHF_HEDGE_CUSTTRADE_HISTORY  WHERE ID IN (SELECT EXECUTION_ID FROM JHF_EXECUTION 
WHERE ORDER_ID IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2008121200157435'));

SELECT * FROM JHF_HEDGE_CUSTTRADE_HISTORY where TRIGGERID = '3458103' 

SELECT * FROM JHF_HEDGE_CUSTTRADE WHERE ID='20081209ORD00000557';



SELECT ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE ORDER_ID='20090210ORD00006728';






-- ORDER_BIND_ID 查询execution
SELECT ORDER_ID,EXECUTION_ID ,SIDE,EXECUTION_PRICE,EXECUTION_AMOUNT,EXECUTION_DATE FROM JHF_EXECUTION WHERE ORDER_ID IN (
SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID IN ('2009021700016865','',''));








-- ALL EXECUTION QUERY
SELECT * FROM JHF_EXECUTION WHERE ORDER_ID IN (
SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID IN ('2009021200038512','',''));





-- JHF_ALIVE_CONTRACT 

SELECT * FROM JHF_ALIVE_CONTRACT WHERE CONTRACT_ID IN (SELECT SETTLE_CONTRACT_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID='2009021000034104');

SELECT * FROM JHF_ALIVE_CONTRACT WHERE CONTRACT_ID IN (SELECT SETTLE_CONTRACT_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2009021000033605');



-- 以orderId 查询 JHF_HEDGE_CUSTTRADE  （完全同期模式）
SELECT * FROM JHF_HEDGE_CUSTTRADE 
WHERE ID IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID IN( '2009021000033603','','')  ) ORDER BY ID; 


SELECT * FROM JHF_HEDGE_CUSTTRADE_HISTORY 
WHERE ID IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID IN('2009021000033603','','')  ) ORDER BY ID; 




-- 以executionId查询  JHF_HEDGE_CUSTTRADE   （滞留模式）
SELECT * FROM JHF_HEDGE_CUSTTRADE 
WHERE ID IN (SELECT  EXECUTION_ID  FROM JHF_EXECUTION WHERE ORDER_ID IN (
SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID IN( '2009021000033105','','')  )) ORDER BY ID; 




SELECT * FROM JHF_HEDGE_CUSTTRADE_HISTORY 
WHERE ID IN (SELECT  EXECUTION_ID  FROM JHF_EXECUTION WHERE ORDER_ID IN (
SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID IN( '2009020900032014','','')  )) ORDER BY ID; 




--- UNKNOW

SELECT * FROM JHF_HEDGE_CUSTTRADE WHERE ID = '20090212ORD00024005' IN (SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2009021200039305');

SELECT * FROM JHF_HEDGE_BIND WHERE CUSTTRADE_ID = '20090212ORD00024005'

SELECT * FROM JHF_CP_TRADE_REQUEST  WHERE CP_COVER_ID = '20090212COVR00007561';

SELECT * FROM JHF_CP_TRADE_RESPONSE   WHERE CP_COVER_ID = '20090212COVR00007561';


-- RATE 


SELECT * JHF_SPOT_RATE WHERE PRICE_ID= ''\G;






--  STATS   CONTROL   
SELECT ORDER_ID ,ORDER_BIND_ID FROM JHF_ALIVE_ORDER WHERE CUSTOMER_ID = '00000120' ORDER BY INPUT_DATE DESC;

SELECT CURRENCY_PAIR,SP_MODE, TRADE_AMOUNT_LINE,LOWAMOUNT_AUTOHEDGE_SWATICH,HIGHAMOUNT_AUTOHEDGE_SWATICH, AUTOHEDGE_MARKET_BUY, LOWAMOUNT_INSTANT_PRICE_SWATICH,HIGHAMOUNT_INSTANT_PRICE_SWATICH, LOWAMOUNT_OTHER_PRICE_SWATICH,HIGHAMOUNT_OTHER_PRICE_SWATICH, AUTOHEDGE_MARKET_SELL FROM JHF_STATUS_CONTRL WHERE CURRENCY_PAIR  = 'EUR/JPY'

SELECT CURRENCY_PAIR, TRADE_AMOUNT_LINE,LOWAMOUNT_AUTOHEDGE_SWATICH,HIGHAMOUNT_AUTOHEDGE_SWATICH, AUTOHEDGE_MARKET_BUY, LOWAMOUNT_OTHER_PRICE_SWATICH,HIGHAMOUNT_OTHER_PRICE_SWATICH, AUTOHEDGE_MARKET_SELL FROM JHF_STATUS_CONTRL WHERE CURRENCY_PAIR  = 'EUR/JPY'

SELECT * FROM JHF_CUSTOMER_BLACKLIST_CONFIG WHERE CURRENCY_PAIR='EUR/JPY'



--======================


select * from JHF_HEDGE_CUSTTRADE where ID IN (
SELECT ORDER_ID FROM JHF_ALIVE_ORDER WHERE ORDER_BIND_ID = '2008121200157415');


--==============
SELECT * FROM JHF_CUSTTRADE_CONTRL 

UPDATE JHF_CUSTTRADE_CONTRL SET TRADE_UPPER_AMOUNT = 9999999999999 WHERE CUSTTRADE_BAND = 5

SELECT PRICE_HISTORY_CACHE_SWITCH FROM JHF_STATUS_CONTRL


SELECT * FROM JHF_CUSTTRADE_CONTRL WHERE CURRENCY_PAIR='EUR/JPY' AND CUSTTRADE_BAND=  2

;
--DELETE FROM JHF_ALIVE_ORDER WHERE ORDER_STATUS IN(1,7)
SELECT * FROM JHF_APP_PROPERTY  WHERE PROP_TYPE='HEDGE'  and PROPERTY_KEY = 'retryForCp'




select * from JHF_ALIVE_ORDER where ORDER_ID='20090206ORD00016513';


show create table JHF_ALIVE_ORDER